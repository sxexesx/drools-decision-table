# Использование Decision Table в JBoss Drools

В интернете можно найти довольно много информации, как использовать Excel-таблицы с BRMS фреймворком JBoss Drools, но 
вся она разрозненная и местами не совсем очевидная. В данной статье я собрал воедино те конструкции и практики, 
которые мы используем у нас в компании Mediascope для ежедневной поставки данных. Надеюсь описанные ниже примеры помогут 
сделать Вашу систему правил гибче и удобнее в применении для аналитиков или бизнес-заказчиков. Если интересно, добро 
пожаловать под кат.   

### Что это вообще такое?

Довольно часто в процессе разработки коммерческого софта мы сталкиваемся с проблемой, когда некоторую логику расчета 
необходимо передать на сторону заказчика. Зачастую представитель этого заказчика не хочет (или не может) использовать 
какой-либо язык программирования для описания необходимой логики работы. В таких случаях на помощь нам приходят BRMS или 
Business Rule Management System. Это такая информационная система для создания, управления и исполнения той самой 
бизнес-логики приложения. Её еще называют бизнес-правилам. Обычно такие системы состоят из сервера, на котором происходит 
выполнение правил - это юрисдикция программистов, и средств ведения самих правил - это уже зона ответственности бизнеса.
 
Практически каждая компания, где бизнес плотно взаимодействует с программной разработкой, пытается изобрести свой 
"велосипед". И мы не исключение. После первой итерации разработки системы управления правилами, было принято решение 
отказаться от внутреннего решения в пользу уже существующих. Причин было несколько: недостаточно быстрая работа системы, 
неудобное описание правил, постоянно возникающие ошибки расчета, и что самое страшное, непредсказуемо меняющийся 
выходной результат. Хорошо, что мы не внедрили это решение в продакшен! 

BRMS фреймворков на рынке достаточно много: <...> Все они либо платные, либо не подходили нам по тем или иным критериям. 
Решили начать с уже зарекомендовавшей себя системы Drools. Она достаточно надежная, проверенная временем, используется 
в банковских решениях, ритейле и телекоме, а также предоставляет возможность ведения бизнес-правил, как на специальном 
языке <...>, так и с помощью Excel-таблиц. Существует также и несколько UI решений для ведения правил. Так как наши 
аналитики используют единую систему ведения справочников и нам удобнее хранить правила там, поэтому от использования UI 
мы отказались в пользу понятных Excel-таблиц.     

### Как выглядит простое бизнес-правило?

Бизнес-правило - <...>


3. Пример с использованием DSL языка

5. Описание общих структур Decision table

6. Примеры использования и сочетания:
* доступ к полю объекта (String, Integer, Boolean)
* пример с диапазоном
* работа с коллекциями
    * contains +++
    * forall(||) и forall (&&). Пример использования с Map +++
    * size для List/Map +++
* вложенный объект ++
* List<SomeClass> где SomeClass состоит из свойства и List'а +
* modify


